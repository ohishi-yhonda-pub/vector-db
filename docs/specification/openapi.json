{"openapi":"3.0.0","info":{"version":"1.0.0","title":"Vector Database API","description":"Cloudflare Vectorize と Workers AI を使用したベクトルデータベースAPI"},"servers":[{"url":"http://localhost:8787","description":"ローカル開発サーバー"}],"components":{"schemas":{},"parameters":{}},"paths":{"/api/vectors":{"post":{"tags":["Vectors"],"summary":"ベクトル作成","description":"テキストから埋め込みベクトルを生成して保存します","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"text":{"type":"string","minLength":1,"example":"これはサンプルテキストです","description":"ベクトル化するテキスト"},"model":{"type":"string","example":"@cf/baai/bge-base-en-v1.5","description":"使用するモデル名"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けるメタデータ"}},"required":["text"]}}}},"responses":{"202":{"description":"ベクトル作成処理が開始されました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"},"message":{"type":"string"}},"required":["jobId","workflowId","status","message"]}},"required":["success","data"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}},"get":{"tags":["Vectors"],"summary":"ベクトル一覧の取得","description":"ベクトルの一覧を取得します","parameters":[{"schema":{"type":"string"},"required":false,"name":"namespace","in":"query"},{"schema":{"type":"string","default":10},"required":false,"name":"limit","in":"query"},{"schema":{"type":"string"},"required":false,"name":"cursor","in":"query"}],"responses":{"200":{"description":"ベクトル一覧","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","minLength":1,"example":"vec_123456","description":"ベクトルの一意識別子"},"values":{"anyOf":[{"type":"array","items":{"type":"number"}},{"nullable":true},{"nullable":true}],"example":[0.1,0.2,0.3],"description":"ベクトルの数値配列またはFloat32Array"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けられたメタデータ"}},"required":["id"]}},"count":{"type":"number"},"message":{"type":"string"}},"required":["success","data","count"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/vectors/{id}":{"get":{"tags":["Vectors"],"summary":"ベクトルの取得","description":"IDを指定してベクトルを取得します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"ベクトル情報","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"id":{"type":"string","minLength":1,"example":"vec_123456","description":"ベクトルの一意識別子"},"values":{"anyOf":[{"type":"array","items":{"type":"number"}},{"nullable":true},{"nullable":true}],"example":[0.1,0.2,0.3],"description":"ベクトルの数値配列またはFloat32Array"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けられたメタデータ"}},"required":["id"]},"message":{"type":"string"}},"required":["success","data"]}}}},"404":{"description":"ベクトルが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}},"delete":{"tags":["Vectors"],"summary":"ベクトルの削除","description":"IDを指定してベクトルを削除します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"id","in":"path"}],"responses":{"202":{"description":"ベクトル削除処理が開始されました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"},"message":{"type":"string"}},"required":["jobId","workflowId","status","message"]}},"required":["success","data"]}}}},"404":{"description":"ベクトルが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/vectors/jobs/{jobId}":{"get":{"tags":["Vectors"],"summary":"ジョブステータス取得","description":"ベクトル作成・削除ジョブのステータスを取得します","parameters":[{"schema":{"type":"string","description":"ジョブID"},"required":true,"description":"ジョブID","name":"jobId","in":"path"}],"responses":{"200":{"description":"ジョブステータス","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string","enum":["create","delete"]},"status":{"type":"string","enum":["pending","processing","completed","failed"]},"createdAt":{"type":"string"},"completedAt":{"type":"string"},"failedAt":{"type":"string"},"error":{"type":"string"},"text":{"type":"string"},"model":{"type":"string"},"namespace":{"type":"string"},"metadata":{"type":"object","additionalProperties":{"nullable":true}},"vectorId":{"type":"string"},"vectorIds":{"type":"array","items":{"type":"string"}},"deletedCount":{"type":"number"}},"required":["id","type","status","createdAt"]}},"required":["success","data"]}}}},"404":{"description":"ジョブが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/vectors/jobs":{"get":{"tags":["Vectors"],"summary":"ジョブ一覧取得","description":"すべてのベクトル作成・削除ジョブの一覧を取得します","responses":{"200":{"description":"ジョブ一覧","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"jobs":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"type":{"type":"string","enum":["create","delete"]},"status":{"type":"string","enum":["pending","processing","completed","failed"]},"createdAt":{"type":"string"},"completedAt":{"type":"string"},"failedAt":{"type":"string"},"error":{"type":"string"},"text":{"type":"string"},"model":{"type":"string"},"namespace":{"type":"string"},"metadata":{"type":"object","additionalProperties":{"nullable":true}},"vectorId":{"type":"string"},"vectorIds":{"type":"array","items":{"type":"string"}},"deletedCount":{"type":"number"}},"required":["id","type","status","createdAt"]}},"total":{"type":"number"}},"required":["jobs","total"]}},"required":["success","data"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/search":{"post":{"tags":["Search"],"summary":"ベクトル検索","description":"テキストクエリを使用してベクトルデータベースを検索します","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"query":{"type":"string","minLength":1,"example":"検索クエリテキスト","description":"検索するテキストクエリ"},"topK":{"type":"integer","minimum":1,"maximum":100,"default":10,"example":10,"description":"返す結果の最大数"},"namespace":{"type":"string","example":"default","description":"検索する名前空間"},"filter":{"type":"object","additionalProperties":{"nullable":true},"example":{"category":"technology"},"description":"メタデータフィルター"},"includeMetadata":{"type":"boolean","default":true,"example":true,"description":"メタデータを結果に含めるか"},"includeValues":{"type":"boolean","default":false,"example":false,"description":"ベクトル値を結果に含めるか"}},"required":["query"]}}}},"responses":{"200":{"description":"検索結果","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"matches":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"score":{"type":"number","minimum":0,"maximum":1,"example":0.95,"description":"類似度スコア（0-1）"},"vector":{"type":"object","properties":{"id":{"type":"string","minLength":1,"example":"vec_123456","description":"ベクトルの一意識別子"},"values":{"anyOf":[{"type":"array","items":{"type":"number"}},{"nullable":true},{"nullable":true}],"example":[0.1,0.2,0.3],"description":"ベクトルの数値配列またはFloat32Array"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けられたメタデータ"}},"required":["id"]},"metadata":{"type":"object","additionalProperties":{"nullable":true}}},"required":["id","score"]}},"query":{"type":"string"},"namespace":{"type":"string"},"processingTime":{"type":"number","example":123.45,"description":"処理時間（ミリ秒）"}},"required":["matches","query","processingTime"]},"message":{"type":"string"}},"required":["success","data"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/search/semantic":{"get":{"tags":["Search"],"summary":"セマンティック検索（GET）","description":"クエリパラメータを使用した簡易セマンティック検索","parameters":[{"schema":{"type":"string","minLength":1,"example":"検索クエリテキスト","description":"検索するテキストクエリ"},"required":true,"description":"検索するテキストクエリ","name":"query","in":"query"},{"schema":{"type":"string","example":"10","description":"返す結果の最大数"},"required":false,"description":"返す結果の最大数","name":"topK","in":"query"},{"schema":{"type":"string","example":"default","description":"検索する名前空間"},"required":false,"description":"検索する名前空間","name":"namespace","in":"query"}],"responses":{"200":{"description":"検索結果","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"matches":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"score":{"type":"number","minimum":0,"maximum":1,"example":0.95,"description":"類似度スコア（0-1）"},"vector":{"type":"object","properties":{"id":{"type":"string","minLength":1,"example":"vec_123456","description":"ベクトルの一意識別子"},"values":{"anyOf":[{"type":"array","items":{"type":"number"}},{"nullable":true},{"nullable":true}],"example":[0.1,0.2,0.3],"description":"ベクトルの数値配列またはFloat32Array"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けられたメタデータ"}},"required":["id"]},"metadata":{"type":"object","additionalProperties":{"nullable":true}}},"required":["id","score"]}},"query":{"type":"string"},"namespace":{"type":"string"},"processingTime":{"type":"number","example":123.45,"description":"処理時間（ミリ秒）"}},"required":["matches","query","processingTime"]},"message":{"type":"string"}},"required":["success","data"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/search/similar":{"post":{"tags":["Search"],"summary":"類似ベクトル検索","description":"指定されたベクトルIDに類似するベクトルを検索します","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"vectorId":{"type":"string","minLength":1,"example":"vec_123456","description":"類似検索の基準となるベクトルID"},"topK":{"type":"integer","minimum":1,"maximum":100,"default":10},"namespace":{"type":"string"},"excludeSelf":{"type":"boolean","default":true,"description":"結果から自分自身を除外するか"}},"required":["vectorId"]}}}},"responses":{"200":{"description":"類似検索結果","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"matches":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"score":{"type":"number","minimum":0,"maximum":1,"example":0.95,"description":"類似度スコア（0-1）"},"vector":{"type":"object","properties":{"id":{"type":"string","minLength":1,"example":"vec_123456","description":"ベクトルの一意識別子"},"values":{"anyOf":[{"type":"array","items":{"type":"number"}},{"nullable":true},{"nullable":true}],"example":[0.1,0.2,0.3],"description":"ベクトルの数値配列またはFloat32Array"},"namespace":{"type":"string","example":"default","description":"ベクトルの名前空間"},"metadata":{"type":"object","properties":{"title":{"type":"string"},"content":{"type":"string"},"url":{"type":"string","format":"uri"},"timestamp":{"type":"string","format":"date-time"}},"additionalProperties":{"nullable":true},"description":"ベクトルに関連付けられたメタデータ"}},"required":["id"]},"metadata":{"type":"object","additionalProperties":{"nullable":true}}},"required":["id","score"]}},"query":{"type":"string"},"namespace":{"type":"string"},"processingTime":{"type":"number","example":123.45,"description":"処理時間（ミリ秒）"}},"required":["matches","query","processingTime"]},"message":{"type":"string"}},"required":["success","data"]}}}},"404":{"description":"ベクトルが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/embeddings":{"post":{"tags":["Embeddings"],"summary":"テキスト埋め込み生成","description":"Workers AIを使用してテキストの埋め込みベクトルを非同期で生成します。処理状況はWorkflow IDで確認できます。","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"text":{"type":"string","minLength":1,"example":"This is a sample text to generate embeddings","description":"埋め込みを生成するテキスト"},"model":{"type":"string","example":"@cf/baai/bge-base-en-v1.5","description":"使用するモデル名"}},"required":["text"]}}}},"responses":{"200":{"description":"処理が開始されました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"}},"required":["jobId","workflowId","status"]},"message":{"type":"string"}},"required":["success","data","message"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/embeddings/batch":{"post":{"tags":["Embeddings"],"summary":"バッチテキスト埋め込み生成","description":"複数のテキストの埋め込みベクトルを非同期で一括生成します。処理状況はWorkflow IDで確認できます。","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"texts":{"type":"array","items":{"type":"string"},"minItems":1,"example":["Text 1","Text 2","Text 3"],"description":"埋め込みを生成するテキストの配列"},"model":{"type":"string"},"batchSize":{"type":"integer","minimum":1,"maximum":100},"saveToVectorize":{"type":"boolean"}},"required":["texts"]}}}},"responses":{"200":{"description":"バッチ処理が開始されました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"},"textsCount":{"type":"number"}},"required":["jobId","workflowId","status","textsCount"]},"message":{"type":"string"}},"required":["success","data","message"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/embeddings/schedule":{"post":{"tags":["Embeddings"],"summary":"バッチ埋め込み生成のスケジュール","description":"バッチ埋め込み生成を非同期でスケジュールします","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"texts":{"type":"array","items":{"type":"string"},"minItems":1,"example":["Text 1","Text 2","Text 3"],"description":"埋め込みを生成するテキストの配列"},"model":{"type":"string"},"batchSize":{"type":"integer","minimum":1,"maximum":100},"saveToVectorize":{"type":"boolean"},"delayMs":{"type":"integer","minimum":0}},"required":["texts"]}}}},"responses":{"200":{"description":"バッチ処理がスケジュールされました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"},"textsCount":{"type":"number"}},"required":["jobId","status","textsCount"]},"message":{"type":"string"}},"required":["success","data","message"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/embeddings/models":{"get":{"tags":["Embeddings"],"summary":"利用可能なモデル一覧","description":"埋め込み生成に利用可能なモデルの一覧を取得します","responses":{"200":{"description":"利用可能なモデル一覧","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"dimensions":{"type":"number"},"maxTokens":{"type":"number"},"recommended":{"type":"boolean"}},"required":["name","description","dimensions","maxTokens","recommended"]}}},"required":["success","data"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/files/upload":{"post":{"tags":["Files"],"summary":"ファイルアップロード","description":"PDFまたは画像ファイルをアップロードして、内容を抽出しベクトル化します","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"アップロードするファイル（PDF、JPEG、PNG、GIF、WebP）"},"namespace":{"type":"string","description":"ベクトルの名前空間（オプション）","example":"documents"},"metadata":{"type":"string","description":"メタデータ（JSON形式の文字列）","example":"{\"category\": \"report\", \"year\": 2024}"}},"required":["file"]}}}},"responses":{"202":{"description":"ファイル処理が開始されました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"workflowId":{"type":"string"},"status":{"type":"string"},"fileInfo":{"type":"object","properties":{"name":{"type":"string"},"type":{"type":"string"},"size":{"type":"number"}},"required":["name","type","size"]},"message":{"type":"string"}},"required":["jobId","workflowId","status","fileInfo","message"]}},"required":["success","data"]}}}},"400":{"description":"不正なリクエスト","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"413":{"description":"ファイルサイズが大きすぎます","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"415":{"description":"サポートされていないファイル形式","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/files/status/{workflowId}":{"get":{"tags":["Files"],"summary":"ファイル処理状況確認","description":"アップロードされたファイルの処理状況を確認します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"workflowId","in":"path"}],"responses":{"200":{"description":"処理状況","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"workflowId":{"type":"string"},"status":{"type":"string","enum":["running","completed","failed","unknown"]},"result":{"type":"object","properties":{"type":{"type":"string","enum":["pdf","image"]},"success":{"type":"boolean"},"content":{"type":"object","properties":{"text":{"type":"string"},"description":{"type":"string"},"extractedPages":{"type":"number"},"metadata":{"type":"object","additionalProperties":{"nullable":true}}}},"vectorIds":{"type":"array","items":{"type":"string"}},"error":{"type":"string"}},"required":["type","success","content","vectorIds"]},"error":{"type":"string"}},"required":["workflowId","status"]}},"required":["success","data"]}}}},"404":{"description":"ワークフローが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/notion/pages":{"get":{"tags":["Notion"],"summary":"Notionページ一覧取得","description":"アクセス可能なすべてのNotionページを取得します","parameters":[{"schema":{"type":"string","default":"100"},"required":false,"name":"page_size","in":"query"},{"schema":{"type":"string","default":"false"},"required":false,"name":"filter_archived","in":"query"},{"schema":{"type":"string","default":"false"},"required":false,"name":"from_cache","in":"query"}],"responses":{"200":{"description":"ページ一覧","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"pages":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"url":{"type":"string"},"last_edited_time":{"type":"string"},"created_time":{"type":"string"},"archived":{"type":"boolean"},"parent":{"type":"object","properties":{"type":{"type":"string"},"database_id":{"type":"string"},"page_id":{"type":"string"},"workspace":{"type":"boolean"}},"required":["type"]}},"required":["id","url","last_edited_time","created_time","archived","parent"]}},"has_more":{"type":"boolean"},"next_cursor":{"type":"string","nullable":true}},"required":["pages","has_more","next_cursor"]},"message":{"type":"string"}},"required":["success"]}}}},"401":{"description":"認証エラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/notion/pages/{pageId}":{"get":{"tags":["Notion"],"summary":"Notionページ取得","description":"Notion APIまたはキャッシュからページ情報を取得します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"pageId","in":"path"},{"schema":{"type":"string","default":false},"required":false,"name":"fromCache","in":"query"}],"responses":{"200":{"description":"ページ情報","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"object":{"type":"string","enum":["page"]},"id":{"type":"string"},"created_time":{"type":"string"},"last_edited_time":{"type":"string"},"created_by":{"type":"object","properties":{"object":{"type":"string","enum":["user"]},"id":{"type":"string"}},"required":["object","id"]},"last_edited_by":{"type":"object","properties":{"object":{"type":"string","enum":["user"]},"id":{"type":"string"}},"required":["object","id"]},"cover":{"nullable":true},"icon":{"nullable":true},"parent":{"oneOf":[{"type":"object","properties":{"type":{"type":"string","enum":["database_id"]},"database_id":{"type":"string"}},"required":["type","database_id"]},{"type":"object","properties":{"type":{"type":"string","enum":["page_id"]},"page_id":{"type":"string"}},"required":["type","page_id"]},{"type":"object","properties":{"type":{"type":"string","enum":["workspace"]},"workspace":{"type":"boolean","enum":[true]}},"required":["type","workspace"]},{"type":"object","properties":{"type":{"type":"string","enum":["block_id"]},"block_id":{"type":"string"}},"required":["type","block_id"]}]},"archived":{"type":"boolean"},"in_trash":{"type":"boolean"},"properties":{"type":"object","additionalProperties":{"nullable":true}},"url":{"type":"string"},"public_url":{"type":"string","nullable":true}},"required":["object","id","created_time","last_edited_time","created_by","last_edited_by","parent","archived","in_trash","properties","url"]},"message":{"type":"string"}},"required":["success"]}}}},"401":{"description":"認証エラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"404":{"description":"ページが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/notion/pages/{pageId}/sync":{"post":{"tags":["Notion"],"summary":"Notionページ同期","description":"Notionページとそのコンテンツを同期し、ベクトル化します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"pageId","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"includeBlocks":{"type":"boolean","default":true},"includeProperties":{"type":"boolean","default":true},"namespace":{"type":"string"}}}}}},"responses":{"202":{"description":"同期処理を開始しました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"jobId":{"type":"string"},"pageId":{"type":"string"},"status":{"type":"string"},"message":{"type":"string"}},"required":["jobId","pageId","status","message"]},"message":{"type":"string"}},"required":["success"]}}}},"401":{"description":"認証エラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/notion/pages/bulk-sync":{"post":{"tags":["Notion"],"summary":"Notionページバルク同期","description":"複数のNotionページを一括で同期・ベクトル化します","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"includeBlocks":{"type":"boolean","default":true},"includeProperties":{"type":"boolean","default":true},"namespace":{"type":"string"},"maxPages":{"type":"number","minimum":1,"maximum":100,"default":50},"filterArchived":{"type":"boolean","default":false},"pageIds":{"type":"array","items":{"type":"string"}}}}}}},"responses":{"202":{"description":"バルク同期処理を開始しました","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"totalPages":{"type":"number"},"syncJobs":{"type":"array","items":{"type":"object","properties":{"pageId":{"type":"string"},"jobId":{"type":"string"},"status":{"type":"string"}},"required":["pageId","jobId","status"]}},"message":{"type":"string"}},"required":["totalPages","syncJobs","message"]},"message":{"type":"string"}},"required":["success"]}}}},"401":{"description":"認証エラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}},"/api/notion/pages/{pageId}/blocks":{"get":{"tags":["Notion"],"summary":"Notionブロック取得","description":"ページ内のブロックを取得します","parameters":[{"schema":{"type":"string","minLength":1},"required":true,"name":"pageId","in":"path"},{"schema":{"type":"string","default":false},"required":false,"name":"fromCache","in":"query"}],"responses":{"200":{"description":"ブロック一覧","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"blocks":{"type":"array","items":{"type":"object","properties":{"object":{"type":"string","enum":["block"]},"id":{"type":"string"},"parent":{"type":"object","properties":{"type":{"type":"string"},"page_id":{"type":"string"},"block_id":{"type":"string"}},"required":["type"]},"created_time":{"type":"string"},"last_edited_time":{"type":"string"},"created_by":{"type":"object","properties":{"object":{"type":"string","enum":["user"]},"id":{"type":"string"}},"required":["object","id"]},"last_edited_by":{"type":"object","properties":{"object":{"type":"string","enum":["user"]},"id":{"type":"string"}},"required":["object","id"]},"has_children":{"type":"boolean"},"archived":{"type":"boolean"},"in_trash":{"type":"boolean"},"type":{"type":"string","enum":["paragraph","heading_1","heading_2","heading_3","bulleted_list_item","numbered_list_item","to_do","toggle","child_page","child_database","embed","image","video","file","pdf","bookmark","callout","quote","equation","divider","table_of_contents","column","column_list","link_preview","synced_block","template","link_to_page","table","table_row","code","unsupported"]}},"required":["object","id","parent","created_time","last_edited_time","created_by","last_edited_by","has_children","archived","in_trash","type"],"additionalProperties":{"nullable":true}}},"has_more":{"type":"boolean"},"next_cursor":{"type":"string","nullable":true}},"required":["blocks","has_more","next_cursor"]},"message":{"type":"string"}},"required":["success"]}}}},"401":{"description":"認証エラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"404":{"description":"ページが見つかりません","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}},"500":{"description":"サーバーエラー","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","example":"Bad Request","description":"エラーの種類"},"message":{"type":"string","example":"無効なリクエストパラメータです","description":"エラーの詳細メッセージ"},"details":{"nullable":true,"description":"エラーの詳細情報"}},"required":["success","error","message"]}}}}}}}}}